{"ast":null,"code":"import { create } from 'zustand';\nimport axios from 'axios';\nconst exercisesStore = create(set => ({\n  exercises: null,\n  updating: false,\n  emptyExercise: {\n    number: \"\",\n    exercise: \"\",\n    weight: \"\",\n    sets: \"\",\n    reps: \"\",\n    intensity: \"\",\n    notes: \"\",\n    workout: null,\n    log: null\n  },\n  updateForm: {\n    exercise: \"\",\n    weight: \"\",\n    sets: \"\",\n    reps: \"\",\n    intensity: \"\",\n    notes: \"\",\n    _id: null,\n    workout: null,\n    log: null\n  },\n  updateUpdateFormField: e => {\n    const {\n      name,\n      value\n    } = e.target;\n    set(state => {\n      return {\n        updateForm: {\n          ...state.updateForm,\n          [name]: value\n        }\n      };\n    });\n  },\n  fetchExercises: async _id => {\n    const res = await axios.get(`/workouts/${_id}/exercises`);\n    set({\n      exercises: res.data.exercises\n    });\n  },\n  createExercise: async (e, workoutId) => {\n    //create an empty exercise that will be updated\n    e.preventDefault();\n\n    //get log id\n    const workout = await axios.get(`/workouts/${workoutId}`);\n    set(state => {\n      return {\n        emptyExercise: {\n          ...state.emptyExercise,\n          workout: workoutId,\n          log: workout.data.log\n        }\n      };\n    });\n    const {\n      emptyExercise,\n      exercises\n    } = exercisesStore.getState();\n    const res = await axios.post(\"/exercises\", emptyExercise);\n    set({\n      exercises: [...exercises, res.data.myExercise]\n    });\n    set(state => {\n      return {\n        emptyExercise: {\n          ...state.emptyExercise,\n          workout: null,\n          log: null\n        }\n      };\n    });\n  },\n  deleteExercise: async _id => {\n    const {\n      exercises\n    } = exercisesStore.getState();\n    await axios.delete(`/exercises/${_id}`);\n    const newExercises = exercises.filter(exercise => {\n      return exercise._id !== _id;\n    });\n    set({\n      exercises: newExercises\n    });\n  },\n  toggleUpdate: exercise => {\n    console.log(exercise.exercise);\n    set({\n      updateForm: {\n        exercise: exercise.exercise,\n        weight: exercise.weight,\n        sets: exercise.sets,\n        reps: exercise.reps,\n        intensity: exercise.intensity,\n        notes: exercise.notes,\n        _id: exercise._id,\n        workout: exercise.workout,\n        log: exercise.log\n      },\n      updating: true\n    });\n  },\n  /*\n   toggleCreate: (workout) => {\n      set({\n          create: true\n      });\n  },\n  */\n\n  updateExercise: async e => {\n    e.preventDefault();\n    const {\n      updateForm: {\n        exercise,\n        weight,\n        sets,\n        reps,\n        intensity,\n        notes,\n        _id,\n        workout,\n        log\n      },\n      exercises\n    } = exercisesStore.getState();\n    console.log(exercise);\n    const res = await axios.put(`/exercises/${_id}`, {\n      exercise,\n      weight,\n      sets,\n      reps,\n      intensity,\n      notes,\n      workout,\n      log\n    });\n    const newExercises = [...exercises];\n    const exerciseIndex = exercises.findIndex(exercise => {\n      return exercise._id === _id;\n    });\n    newExercises[exerciseIndex] = res.data.myExercise;\n    console.log(res.data.myExercise);\n    set({\n      exercises: newExercises,\n      updateForm: {\n        exercise: \"\",\n        weight: \"\",\n        sets: \"\",\n        reps: \"\",\n        intensity: \"\",\n        notes: \"\",\n        _id: null,\n        log: null,\n        workout: null\n      },\n      updating: false\n    });\n  }\n}));\nexport default exercisesStore;","map":{"version":3,"names":["create","axios","exercisesStore","set","exercises","updating","emptyExercise","number","exercise","weight","sets","reps","intensity","notes","workout","log","updateForm","_id","updateUpdateFormField","e","name","value","target","state","fetchExercises","res","get","data","createExercise","workoutId","preventDefault","getState","post","myExercise","deleteExercise","delete","newExercises","filter","toggleUpdate","console","updateExercise","put","exerciseIndex","findIndex"],"sources":["/Users/aidankatz/Projects/logbook-simple/frontend/src/stores/exercisesStore.js"],"sourcesContent":["import { create } from 'zustand';\nimport axios from 'axios';\n\nconst exercisesStore = create((set) => ({\n    exercises: null,\n\n    updating: false,\n\n    emptyExercise: {\n        number: \"\",\n        exercise: \"\",\n        weight: \"\",\n        sets: \"\",\n        reps: \"\",\n        intensity: \"\",\n        notes: \"\",\n        workout: null,\n        log: null\n    },\n\n    updateForm: {\n        exercise: \"\",\n        weight: \"\",\n        sets: \"\",\n        reps: \"\",\n        intensity: \"\",\n        notes: \"\",\n        _id: null,\n        workout: null,\n        log: null\n    },\n\n    updateUpdateFormField: (e) => {\n        const {name, value} = e.target;\n\n        set(state => {\n            return {\n                updateForm: {\n                    ...state.updateForm,\n                    [name]: value\n                }\n            }\n        });\n    },\n\n    fetchExercises: async (_id) => {\n        const res = await axios.get(`/workouts/${_id}/exercises`);\n        set({\n            exercises: res.data.exercises\n        });\n    },\n\n    createExercise: async (e, workoutId) => {\n        //create an empty exercise that will be updated\n        e.preventDefault();\n\n        //get log id\n        const workout = await axios.get(`/workouts/${workoutId}`);\n\n        set((state) => {\n            return {\n                emptyExercise: {\n                    ...state.emptyExercise,\n                    workout: workoutId,\n                    log: workout.data.log\n                }\n            };\n        });\n\n        const { emptyExercise, exercises } = exercisesStore.getState();\n\n        const res = await axios.post(\"/exercises\", emptyExercise);\n\n        set({\n            exercises: [...exercises, res.data.myExercise]\n        });\n        set((state) => {\n            return {\n                emptyExercise: {\n                    ...state.emptyExercise,\n                    workout: null,\n                    log: null\n                }\n            };\n        });\n    },\n\n    deleteExercise: async (_id) => {\n        const { exercises } = exercisesStore.getState();\n\n        await axios.delete(`/exercises/${_id}`);\n\n        const newExercises = exercises.filter((exercise) => {\n            return exercise._id !== _id;\n        });\n\n        set({\n            exercises: newExercises\n        });\n    },\n\n    toggleUpdate: (exercise) => {\n\n        console.log(exercise.exercise)\n        set({\n            updateForm: {\n                exercise: exercise.exercise,\n                weight: exercise.weight,\n                sets: exercise.sets,\n                reps: exercise.reps,\n                intensity: exercise.intensity,\n                notes: exercise.notes,\n                _id: exercise._id,\n                workout: exercise.workout,\n                log: exercise.log\n            },\n            updating: true\n        });\n    },\n\n    /*\n\n    toggleCreate: (workout) => {\n        set({\n            create: true\n        });\n    },\n    */\n\n    updateExercise: async (e) => {\n        e.preventDefault();\n        const {updateForm: {exercise, weight, sets, reps, intensity, notes, _id, workout, log}, exercises} = exercisesStore.getState();\n        console.log(exercise);\n        const res = await axios.put(`/exercises/${_id}`, {exercise, weight, sets, reps, intensity, notes, workout, log});\n\n        const newExercises = [...exercises];\n        const exerciseIndex = exercises.findIndex((exercise) => {\n            return exercise._id === _id;\n        });\n        newExercises[exerciseIndex] = res.data.myExercise;\n        console.log(res.data.myExercise);\n\n        set({\n            exercises: newExercises,\n            updateForm: {\n                exercise: \"\",\n                weight: \"\",\n                sets: \"\",\n                reps: \"\",\n                intensity: \"\",\n                notes: \"\",\n                _id: null,\n                log: null,\n                workout: null\n            },\n            updating: false\n        });\n    }\n  }));\n\nexport default exercisesStore;\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,cAAc,GAAGF,MAAM,CAAEG,GAAG,KAAM;EACpCC,SAAS,EAAE,IAAI;EAEfC,QAAQ,EAAE,KAAK;EAEfC,aAAa,EAAE;IACXC,MAAM,EAAE,EAAE;IACVC,QAAQ,EAAE,EAAE;IACZC,MAAM,EAAE,EAAE;IACVC,IAAI,EAAE,EAAE;IACRC,IAAI,EAAE,EAAE;IACRC,SAAS,EAAE,EAAE;IACbC,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE,IAAI;IACbC,GAAG,EAAE;EACT,CAAC;EAEDC,UAAU,EAAE;IACRR,QAAQ,EAAE,EAAE;IACZC,MAAM,EAAE,EAAE;IACVC,IAAI,EAAE,EAAE;IACRC,IAAI,EAAE,EAAE;IACRC,SAAS,EAAE,EAAE;IACbC,KAAK,EAAE,EAAE;IACTI,GAAG,EAAE,IAAI;IACTH,OAAO,EAAE,IAAI;IACbC,GAAG,EAAE;EACT,CAAC;EAEDG,qBAAqB,EAAGC,CAAC,IAAK;IAC1B,MAAM;MAACC,IAAI;MAAEC;IAAK,CAAC,GAAGF,CAAC,CAACG,MAAM;IAE9BnB,GAAG,CAACoB,KAAK,IAAI;MACT,OAAO;QACHP,UAAU,EAAE;UACR,GAAGO,KAAK,CAACP,UAAU;UACnB,CAACI,IAAI,GAAGC;QACZ;MACJ,CAAC;IACL,CAAC,CAAC;EACN,CAAC;EAEDG,cAAc,EAAE,MAAOP,GAAG,IAAK;IAC3B,MAAMQ,GAAG,GAAG,MAAMxB,KAAK,CAACyB,GAAG,CAAE,aAAYT,GAAI,YAAW,CAAC;IACzDd,GAAG,CAAC;MACAC,SAAS,EAAEqB,GAAG,CAACE,IAAI,CAACvB;IACxB,CAAC,CAAC;EACN,CAAC;EAEDwB,cAAc,EAAE,MAAAA,CAAOT,CAAC,EAAEU,SAAS,KAAK;IACpC;IACAV,CAAC,CAACW,cAAc,EAAE;;IAElB;IACA,MAAMhB,OAAO,GAAG,MAAMb,KAAK,CAACyB,GAAG,CAAE,aAAYG,SAAU,EAAC,CAAC;IAEzD1B,GAAG,CAAEoB,KAAK,IAAK;MACX,OAAO;QACHjB,aAAa,EAAE;UACX,GAAGiB,KAAK,CAACjB,aAAa;UACtBQ,OAAO,EAAEe,SAAS;UAClBd,GAAG,EAAED,OAAO,CAACa,IAAI,CAACZ;QACtB;MACJ,CAAC;IACL,CAAC,CAAC;IAEF,MAAM;MAAET,aAAa;MAAEF;IAAU,CAAC,GAAGF,cAAc,CAAC6B,QAAQ,EAAE;IAE9D,MAAMN,GAAG,GAAG,MAAMxB,KAAK,CAAC+B,IAAI,CAAC,YAAY,EAAE1B,aAAa,CAAC;IAEzDH,GAAG,CAAC;MACAC,SAAS,EAAE,CAAC,GAAGA,SAAS,EAAEqB,GAAG,CAACE,IAAI,CAACM,UAAU;IACjD,CAAC,CAAC;IACF9B,GAAG,CAAEoB,KAAK,IAAK;MACX,OAAO;QACHjB,aAAa,EAAE;UACX,GAAGiB,KAAK,CAACjB,aAAa;UACtBQ,OAAO,EAAE,IAAI;UACbC,GAAG,EAAE;QACT;MACJ,CAAC;IACL,CAAC,CAAC;EACN,CAAC;EAEDmB,cAAc,EAAE,MAAOjB,GAAG,IAAK;IAC3B,MAAM;MAAEb;IAAU,CAAC,GAAGF,cAAc,CAAC6B,QAAQ,EAAE;IAE/C,MAAM9B,KAAK,CAACkC,MAAM,CAAE,cAAalB,GAAI,EAAC,CAAC;IAEvC,MAAMmB,YAAY,GAAGhC,SAAS,CAACiC,MAAM,CAAE7B,QAAQ,IAAK;MAChD,OAAOA,QAAQ,CAACS,GAAG,KAAKA,GAAG;IAC/B,CAAC,CAAC;IAEFd,GAAG,CAAC;MACAC,SAAS,EAAEgC;IACf,CAAC,CAAC;EACN,CAAC;EAEDE,YAAY,EAAG9B,QAAQ,IAAK;IAExB+B,OAAO,CAACxB,GAAG,CAACP,QAAQ,CAACA,QAAQ,CAAC;IAC9BL,GAAG,CAAC;MACAa,UAAU,EAAE;QACRR,QAAQ,EAAEA,QAAQ,CAACA,QAAQ;QAC3BC,MAAM,EAAED,QAAQ,CAACC,MAAM;QACvBC,IAAI,EAAEF,QAAQ,CAACE,IAAI;QACnBC,IAAI,EAAEH,QAAQ,CAACG,IAAI;QACnBC,SAAS,EAAEJ,QAAQ,CAACI,SAAS;QAC7BC,KAAK,EAAEL,QAAQ,CAACK,KAAK;QACrBI,GAAG,EAAET,QAAQ,CAACS,GAAG;QACjBH,OAAO,EAAEN,QAAQ,CAACM,OAAO;QACzBC,GAAG,EAAEP,QAAQ,CAACO;MAClB,CAAC;MACDV,QAAQ,EAAE;IACd,CAAC,CAAC;EACN,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;;EAGImC,cAAc,EAAE,MAAOrB,CAAC,IAAK;IACzBA,CAAC,CAACW,cAAc,EAAE;IAClB,MAAM;MAACd,UAAU,EAAE;QAACR,QAAQ;QAAEC,MAAM;QAAEC,IAAI;QAAEC,IAAI;QAAEC,SAAS;QAAEC,KAAK;QAAEI,GAAG;QAAEH,OAAO;QAAEC;MAAG,CAAC;MAAEX;IAAS,CAAC,GAAGF,cAAc,CAAC6B,QAAQ,EAAE;IAC9HQ,OAAO,CAACxB,GAAG,CAACP,QAAQ,CAAC;IACrB,MAAMiB,GAAG,GAAG,MAAMxB,KAAK,CAACwC,GAAG,CAAE,cAAaxB,GAAI,EAAC,EAAE;MAACT,QAAQ;MAAEC,MAAM;MAAEC,IAAI;MAAEC,IAAI;MAAEC,SAAS;MAAEC,KAAK;MAAEC,OAAO;MAAEC;IAAG,CAAC,CAAC;IAEhH,MAAMqB,YAAY,GAAG,CAAC,GAAGhC,SAAS,CAAC;IACnC,MAAMsC,aAAa,GAAGtC,SAAS,CAACuC,SAAS,CAAEnC,QAAQ,IAAK;MACpD,OAAOA,QAAQ,CAACS,GAAG,KAAKA,GAAG;IAC/B,CAAC,CAAC;IACFmB,YAAY,CAACM,aAAa,CAAC,GAAGjB,GAAG,CAACE,IAAI,CAACM,UAAU;IACjDM,OAAO,CAACxB,GAAG,CAACU,GAAG,CAACE,IAAI,CAACM,UAAU,CAAC;IAEhC9B,GAAG,CAAC;MACAC,SAAS,EAAEgC,YAAY;MACvBpB,UAAU,EAAE;QACRR,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,EAAE;QACVC,IAAI,EAAE,EAAE;QACRC,IAAI,EAAE,EAAE;QACRC,SAAS,EAAE,EAAE;QACbC,KAAK,EAAE,EAAE;QACTI,GAAG,EAAE,IAAI;QACTF,GAAG,EAAE,IAAI;QACTD,OAAO,EAAE;MACb,CAAC;MACDT,QAAQ,EAAE;IACd,CAAC,CAAC;EACN;AACF,CAAC,CAAC,CAAC;AAEL,eAAeH,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}