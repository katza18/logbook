{"ast":null,"code":"import { create } from 'zustand';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nconst logsStore = create(set => {\n  var _s = $RefreshSig$();\n  return {\n    logs: null,\n    create: false,\n    createForm: {\n      title: \"\",\n      body: \"\",\n      type: \"\",\n      _id: null\n    },\n    updateForm: {\n      title: \"\",\n      body: \"\",\n      _id: null\n    },\n    setCreateFalse: () => {\n      set({\n        create: false\n      });\n    },\n    updateCreateFormField: e => {\n      const {\n        name,\n        value\n      } = e.target;\n      set(state => {\n        return {\n          createForm: {\n            ...state.createForm,\n            [name]: value\n          }\n        };\n      });\n    },\n    updateUpdateFormField: e => {\n      const {\n        name,\n        value\n      } = e.target;\n      set(state => {\n        return {\n          updateForm: {\n            ...state.updateForm,\n            [name]: value\n          }\n        };\n      });\n    },\n    fetchLogs: async () => {\n      const res = await axios.get(\"/logs\");\n      set({\n        logs: res.data.logs\n      });\n    },\n    createLog: async e => {\n      const {\n        createForm,\n        logs\n      } = logsStore.getState();\n      e.preventDefault();\n      const res = await axios.post(\"/logs\", createForm);\n      set({\n        logs: [...logs, res.data.log],\n        createForm: {\n          title: \"\",\n          body: \"\",\n          type: \"\"\n        },\n        create: false\n      });\n    },\n    deleteLog: async _id => {\n      const {\n        logs\n      } = logsStore.getState();\n\n      //Delete logbook\n      await axios.delete(`/logs/${_id}`);\n      const newLogs = logs.filter(log => {\n        return log._id !== _id;\n      });\n      set({\n        logs: newLogs\n      });\n    },\n    toggleUpdate: log => {\n      set({\n        updateForm: {\n          title: log.title,\n          body: log.body,\n          _id: log._id\n        }\n      });\n    },\n    toggleCreate: log => {\n      set({\n        create: true\n      });\n    },\n    updateLog: async e => {\n      e.preventDefault();\n      const {\n        updateForm: {\n          title,\n          body,\n          _id\n        },\n        logs\n      } = logsStore.getState();\n      const res = await axios.put(`/logs/${_id}`, {\n        title,\n        body\n      });\n      const newLogs = [...logs];\n      const logIndex = logs.findIndex(log => {\n        return log._id === _id;\n      });\n      newLogs[logIndex] = res.data.log;\n      set({\n        logs: newLogs,\n        updateForm: {\n          title: \"\",\n          body: \"\",\n          _id: null\n        }\n      });\n    },\n    viewWorkoutsOrMeals: _s((type, logId) => {\n      _s();\n      const navigate = useNavigate();\n      if (type.localeCompare(\"Exercise\")) return \"workouts\";else return \"meals\";\n    }, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n      return [useNavigate];\n    })\n  };\n});\nexport default logsStore;","map":{"version":3,"names":["create","axios","useNavigate","logsStore","set","_s","$RefreshSig$","logs","createForm","title","body","type","_id","updateForm","setCreateFalse","updateCreateFormField","e","name","value","target","state","updateUpdateFormField","fetchLogs","res","get","data","createLog","getState","preventDefault","post","log","deleteLog","delete","newLogs","filter","toggleUpdate","toggleCreate","updateLog","put","logIndex","findIndex","viewWorkoutsOrMeals","logId","navigate","localeCompare"],"sources":["/Users/aidankatz/Projects/logbook-simple/frontend/src/stores/logsStore.js"],"sourcesContent":["import { create } from 'zustand';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nconst logsStore = create((set) => ({\n    logs: null,\n\n    create: false,\n\n    createForm: {\n        title: \"\",\n        body: \"\",\n        type: \"\",\n        _id: null\n    },\n\n    updateForm: {\n        title: \"\",\n        body: \"\",\n        _id: null\n    },\n\n    setCreateFalse: () => {\n        set({\n            create: false\n        });\n    },\n\n    updateCreateFormField: (e) => {\n        const {name, value} = e.target;\n        set((state) => {\n            return {\n                createForm: {\n                    ...state.createForm,\n                    [name]: value\n                }\n            };\n        });\n    },\n\n    updateUpdateFormField: (e) => {\n        const {name, value} = e.target;\n\n        set(state => {\n            return {\n                updateForm: {\n                    ...state.updateForm,\n                    [name]: value\n                }\n            }\n        });\n    },\n\n    fetchLogs: async () => {\n        const res = await axios.get(\"/logs\");\n        set({\n            logs: res.data.logs\n        });\n    },\n\n    createLog: async (e) => {\n        const { createForm, logs } = logsStore.getState();\n        e.preventDefault();\n        const res = await axios.post(\"/logs\", createForm);\n\n        set({\n            logs: [...logs, res.data.log],\n            createForm: { title: \"\", body: \"\", type: \"\"},\n            create: false\n        });\n    },\n\n    deleteLog: async (_id) => {\n        const { logs } = logsStore.getState();\n\n        //Delete logbook\n        await axios.delete(`/logs/${_id}`);\n\n        const newLogs = logs.filter((log) => {\n            return log._id !== _id;\n        });\n\n        set({\n            logs: newLogs\n        });\n    },\n\n    toggleUpdate: (log) => {\n        set({\n            updateForm: {\n                title: log.title,\n                body: log.body,\n                _id: log._id\n            }\n        });\n    },\n\n    toggleCreate: (log) => {\n        set({\n            create: true\n        });\n    },\n\n    updateLog: async (e) => {\n        e.preventDefault();\n        const {updateForm: {title, body, _id}, logs} = logsStore.getState();\n        const res = await axios.put(`/logs/${_id}`, {title, body});\n\n        const newLogs = [...logs];\n        const logIndex = logs.findIndex((log) => {\n            return log._id === _id;\n        });\n        newLogs[logIndex] = res.data.log;\n\n        set({\n            logs: newLogs,\n            updateForm: {\n                title: \"\", body: \"\", _id: null\n            }\n        });\n    },\n\n    viewWorkoutsOrMeals: (type, logId) => {\n        const navigate = useNavigate();\n        if (type.localeCompare(\"Exercise\"))\n            return\"workouts\";\n        else\n            return \"meals\";\n    }\n  }));\n\nexport default logsStore;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}