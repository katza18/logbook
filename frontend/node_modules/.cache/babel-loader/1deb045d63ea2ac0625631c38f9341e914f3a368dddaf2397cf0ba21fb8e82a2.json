{"ast":null,"code":"import { create } from 'zustand';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nconst navigate = useNavigate();\nconst logsStore = create(set => ({\n  logs: null,\n  workouts: null,\n  create: false,\n  createForm: {\n    title: \"\",\n    body: \"\",\n    _id: null\n  },\n  updateForm: {\n    title: \"\",\n    body: \"\",\n    _id: null\n  },\n  setCreateFalse: () => {\n    set({\n      create: false\n    });\n  },\n  updateCreateFormField: e => {\n    const {\n      name,\n      value\n    } = e.target;\n    set(state => {\n      return {\n        createForm: {\n          ...state.createForm,\n          [name]: value\n        }\n      };\n    });\n  },\n  updateUpdateFormField: e => {\n    const {\n      name,\n      value\n    } = e.target;\n    set(state => {\n      return {\n        updateForm: {\n          ...state.updateForm,\n          [name]: value\n        }\n      };\n    });\n  },\n  fetchLogs: async () => {\n    const res = await axios.get(\"/logs\");\n    set({\n      logs: res.data.logs\n    });\n  },\n  createLog: async e => {\n    const {\n      createForm,\n      logs\n    } = logsStore.getState();\n    e.preventDefault();\n    const res = await axios.post(\"/logs\", createForm);\n    set({\n      logs: [...logs, res.data.log],\n      createForm: {\n        title: \"\",\n        body: \"\"\n      },\n      create: false\n    });\n  },\n  deleteLog: async _id => {\n    const {\n      logs\n    } = logsStore.getState();\n    await axios.delete(`/logs/${_id}`);\n    const newLogs = logs.filter(log => {\n      return log._id !== _id;\n    });\n    set({\n      logs: newLogs\n    });\n  },\n  viewLog: async _id => {\n    const res = await axios.get(`/logs/${_id}/workouts`);\n    set({\n      workouts: res.data.workouts\n    });\n    navigate('/logs/${_id}/workouts');\n  },\n  toggleUpdate: log => {\n    set({\n      updateForm: {\n        title: log.title,\n        body: log.body,\n        _id: log._id\n      }\n    });\n  },\n  toggleCreate: log => {\n    set({\n      create: true\n    });\n  },\n  updateLog: async e => {\n    e.preventDefault();\n    const {\n      updateForm: {\n        title,\n        body,\n        _id\n      },\n      logs\n    } = logsStore.getState();\n    const res = await axios.put(`/logs/${_id}`, {\n      title,\n      body\n    });\n    const newLogs = [...logs];\n    const logIndex = logs.findIndex(log => {\n      return log._id === _id;\n    });\n    newLogs[logIndex] = res.data.log;\n    set({\n      logs: newLogs,\n      updateForm: {\n        title: \"\",\n        body: \"\",\n        _id: null\n      }\n    });\n  }\n}));\nexport default logsStore;","map":{"version":3,"names":["create","axios","useNavigate","navigate","logsStore","set","logs","workouts","createForm","title","body","_id","updateForm","setCreateFalse","updateCreateFormField","e","name","value","target","state","updateUpdateFormField","fetchLogs","res","get","data","createLog","getState","preventDefault","post","log","deleteLog","delete","newLogs","filter","viewLog","toggleUpdate","toggleCreate","updateLog","put","logIndex","findIndex"],"sources":["/Users/aidankatz/Projects/logbook-simple/frontend/src/stores/logsStore.js"],"sourcesContent":["import { create } from 'zustand';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nconst navigate = useNavigate();\n\nconst logsStore = create((set) => ({\n    logs: null,\n\n    workouts: null,\n\n    create: false,\n\n    createForm: {\n        title: \"\",\n        body: \"\",\n        _id: null\n    },\n\n    updateForm: {\n        title: \"\",\n        body: \"\",\n        _id: null\n    },\n\n    setCreateFalse: () => {\n        set({\n            create: false\n        });\n    },\n\n    updateCreateFormField: (e) => {\n        const {name, value} = e.target;\n        set((state) => {\n            return {\n                createForm: {\n                    ...state.createForm,\n                    [name]: value\n                }\n            };\n        });\n    },\n\n    updateUpdateFormField: (e) => {\n        const {name, value} = e.target;\n\n        set(state => {\n            return {\n                updateForm: {\n                    ...state.updateForm,\n                    [name]: value\n                }\n            }\n        });\n    },\n\n    fetchLogs: async () => {\n        const res = await axios.get(\"/logs\");\n        set({\n            logs: res.data.logs\n        });\n    },\n\n    createLog: async (e) => {\n        const { createForm, logs } = logsStore.getState();\n        e.preventDefault();\n        const res = await axios.post(\"/logs\", createForm);\n\n        set({\n            logs: [...logs, res.data.log],\n            createForm: { title: \"\", body: \"\"},\n            create: false\n        });\n    },\n\n    deleteLog: async (_id) => {\n        const { logs } = logsStore.getState();\n\n        await axios.delete(`/logs/${_id}`);\n\n        const newLogs = logs.filter((log) => {\n            return log._id !== _id;\n        });\n\n        set({\n            logs: newLogs\n        });\n    },\n\n    viewLog: async (_id) => {\n        const res = await axios.get(`/logs/${_id}/workouts`);\n        set({\n            workouts: res.data.workouts\n        });\n        navigate('/logs/${_id}/workouts');\n    },\n\n    toggleUpdate: (log) => {\n        set({\n            updateForm: {\n                title: log.title,\n                body: log.body,\n                _id: log._id\n            }\n        });\n    },\n\n    toggleCreate: (log) => {\n        set({\n            create: true\n        });\n    },\n\n    updateLog: async (e) => {\n        e.preventDefault();\n        const {updateForm: {title, body, _id}, logs} = logsStore.getState();\n        const res = await axios.put(`/logs/${_id}`, {title, body});\n\n        const newLogs = [...logs];\n        const logIndex = logs.findIndex((log) => {\n            return log._id === _id;\n        });\n        newLogs[logIndex] = res.data.log;\n\n        set({\n            logs: newLogs,\n            updateForm: {\n                title: \"\", body: \"\", _id: null\n            }\n        });\n    }\n  }));\n\nexport default logsStore;\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,QAAQ,GAAGD,WAAW,EAAE;AAE9B,MAAME,SAAS,GAAGJ,MAAM,CAAEK,GAAG,KAAM;EAC/BC,IAAI,EAAE,IAAI;EAEVC,QAAQ,EAAE,IAAI;EAEdP,MAAM,EAAE,KAAK;EAEbQ,UAAU,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,EAAE;IACRC,GAAG,EAAE;EACT,CAAC;EAEDC,UAAU,EAAE;IACRH,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,EAAE;IACRC,GAAG,EAAE;EACT,CAAC;EAEDE,cAAc,EAAEA,CAAA,KAAM;IAClBR,GAAG,CAAC;MACAL,MAAM,EAAE;IACZ,CAAC,CAAC;EACN,CAAC;EAEDc,qBAAqB,EAAGC,CAAC,IAAK;IAC1B,MAAM;MAACC,IAAI;MAAEC;IAAK,CAAC,GAAGF,CAAC,CAACG,MAAM;IAC9Bb,GAAG,CAAEc,KAAK,IAAK;MACX,OAAO;QACHX,UAAU,EAAE;UACR,GAAGW,KAAK,CAACX,UAAU;UACnB,CAACQ,IAAI,GAAGC;QACZ;MACJ,CAAC;IACL,CAAC,CAAC;EACN,CAAC;EAEDG,qBAAqB,EAAGL,CAAC,IAAK;IAC1B,MAAM;MAACC,IAAI;MAAEC;IAAK,CAAC,GAAGF,CAAC,CAACG,MAAM;IAE9Bb,GAAG,CAACc,KAAK,IAAI;MACT,OAAO;QACHP,UAAU,EAAE;UACR,GAAGO,KAAK,CAACP,UAAU;UACnB,CAACI,IAAI,GAAGC;QACZ;MACJ,CAAC;IACL,CAAC,CAAC;EACN,CAAC;EAEDI,SAAS,EAAE,MAAAA,CAAA,KAAY;IACnB,MAAMC,GAAG,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAC,OAAO,CAAC;IACpClB,GAAG,CAAC;MACAC,IAAI,EAAEgB,GAAG,CAACE,IAAI,CAAClB;IACnB,CAAC,CAAC;EACN,CAAC;EAEDmB,SAAS,EAAE,MAAOV,CAAC,IAAK;IACpB,MAAM;MAAEP,UAAU;MAAEF;IAAK,CAAC,GAAGF,SAAS,CAACsB,QAAQ,EAAE;IACjDX,CAAC,CAACY,cAAc,EAAE;IAClB,MAAML,GAAG,GAAG,MAAMrB,KAAK,CAAC2B,IAAI,CAAC,OAAO,EAAEpB,UAAU,CAAC;IAEjDH,GAAG,CAAC;MACAC,IAAI,EAAE,CAAC,GAAGA,IAAI,EAAEgB,GAAG,CAACE,IAAI,CAACK,GAAG,CAAC;MAC7BrB,UAAU,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,IAAI,EAAE;MAAE,CAAC;MAClCV,MAAM,EAAE;IACZ,CAAC,CAAC;EACN,CAAC;EAED8B,SAAS,EAAE,MAAOnB,GAAG,IAAK;IACtB,MAAM;MAAEL;IAAK,CAAC,GAAGF,SAAS,CAACsB,QAAQ,EAAE;IAErC,MAAMzB,KAAK,CAAC8B,MAAM,CAAE,SAAQpB,GAAI,EAAC,CAAC;IAElC,MAAMqB,OAAO,GAAG1B,IAAI,CAAC2B,MAAM,CAAEJ,GAAG,IAAK;MACjC,OAAOA,GAAG,CAAClB,GAAG,KAAKA,GAAG;IAC1B,CAAC,CAAC;IAEFN,GAAG,CAAC;MACAC,IAAI,EAAE0B;IACV,CAAC,CAAC;EACN,CAAC;EAEDE,OAAO,EAAE,MAAOvB,GAAG,IAAK;IACpB,MAAMW,GAAG,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAE,SAAQZ,GAAI,WAAU,CAAC;IACpDN,GAAG,CAAC;MACAE,QAAQ,EAAEe,GAAG,CAACE,IAAI,CAACjB;IACvB,CAAC,CAAC;IACFJ,QAAQ,CAAC,uBAAuB,CAAC;EACrC,CAAC;EAEDgC,YAAY,EAAGN,GAAG,IAAK;IACnBxB,GAAG,CAAC;MACAO,UAAU,EAAE;QACRH,KAAK,EAAEoB,GAAG,CAACpB,KAAK;QAChBC,IAAI,EAAEmB,GAAG,CAACnB,IAAI;QACdC,GAAG,EAAEkB,GAAG,CAAClB;MACb;IACJ,CAAC,CAAC;EACN,CAAC;EAEDyB,YAAY,EAAGP,GAAG,IAAK;IACnBxB,GAAG,CAAC;MACAL,MAAM,EAAE;IACZ,CAAC,CAAC;EACN,CAAC;EAEDqC,SAAS,EAAE,MAAOtB,CAAC,IAAK;IACpBA,CAAC,CAACY,cAAc,EAAE;IAClB,MAAM;MAACf,UAAU,EAAE;QAACH,KAAK;QAAEC,IAAI;QAAEC;MAAG,CAAC;MAAEL;IAAI,CAAC,GAAGF,SAAS,CAACsB,QAAQ,EAAE;IACnE,MAAMJ,GAAG,GAAG,MAAMrB,KAAK,CAACqC,GAAG,CAAE,SAAQ3B,GAAI,EAAC,EAAE;MAACF,KAAK;MAAEC;IAAI,CAAC,CAAC;IAE1D,MAAMsB,OAAO,GAAG,CAAC,GAAG1B,IAAI,CAAC;IACzB,MAAMiC,QAAQ,GAAGjC,IAAI,CAACkC,SAAS,CAAEX,GAAG,IAAK;MACrC,OAAOA,GAAG,CAAClB,GAAG,KAAKA,GAAG;IAC1B,CAAC,CAAC;IACFqB,OAAO,CAACO,QAAQ,CAAC,GAAGjB,GAAG,CAACE,IAAI,CAACK,GAAG;IAEhCxB,GAAG,CAAC;MACAC,IAAI,EAAE0B,OAAO;MACbpB,UAAU,EAAE;QACRH,KAAK,EAAE,EAAE;QAAEC,IAAI,EAAE,EAAE;QAAEC,GAAG,EAAE;MAC9B;IACJ,CAAC,CAAC;EACN;AACF,CAAC,CAAC,CAAC;AAEL,eAAeP,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}